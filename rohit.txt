CREATE TABLE `cancellations` (
  `cancellation_id` int(11) NOT NULL AUTO_INCREMENT,
  `booking_id` int(11) NOT NULL,
  `passenger_id` int(11) NOT NULL,
  `amount_refunded` decimal(10,2) NOT NULL,
  `gateway_refund_id` varchar(255) DEFAULT NULL,
  `status` enum('COMPLETED','FAILED','PENDING') NOT NULL DEFAULT 'PENDING',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`cancellation_id`),
  KEY `booking_id` (`booking_id`),
  KEY `passenger_id` (`passenger_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;



ALTER TABLE `passengers`
ADD `passenger_status` ENUM('CONFIRMED', 'CANCELLED') NOT NULL DEFAULT 'CONFIRMED' AFTER `fare`;

ALTER TABLE `cancellations` 
ADD `cancellation_reason` VARCHAR(255) NULL DEFAULT NULL AFTER `amount_refunded`; 